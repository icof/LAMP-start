# Premier workflow : V√©rification syntaxe PHP
# Ce workflow v√©rifie que tous les fichiers PHP ont une syntaxe correcte

name: üîç V√©rification syntaxe PHP

# Quand ce workflow se d√©clenche
on:
  push:              # √Ä chaque push
  pull_request:      # √Ä chaque pull request
  workflow_dispatch: # Permet de lancer manuellement depuis GitHub

# Les t√¢ches √† ex√©cuter
jobs:
  # Nom du job
  syntax-check:
    # Sur quelle machine virtuelle ex√©cuter
    runs-on: ubuntu-latest
    
    # Les √©tapes du job
    steps:
      # √âtape 1 : R√©cup√©rer le code du d√©p√¥t
      - name: üì• R√©cup√©rer le code
        uses: actions/checkout@v4
        
      # √âtape 2 : Installer PHP
      - name: üêò Installer PHP 8.3
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.3'
          
      # √âtape 3 : V√©rifier la syntaxe des fichiers PHP
      - name: ‚úÖ V√©rifier syntaxe PHP
        run: |
          echo "üîç V√©rification des fichiers PHP..."
          # Trouve tous les fichiers .php et v√©rifie leur syntaxe
          find . -name "*.php" -not -path "./vendor/*" | while read file; do
            echo "V√©rification de $file"
            php -l "$file"
          done
          echo "‚úÖ Tous les fichiers PHP ont une syntaxe correcte !"
